<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ç–æ–º–∞–º–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="bg-light">

<!-- üîπ –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">–ü–ª–∞–∑–º–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="nav-item"><a href="array.html" class="nav-link active">–ê—Ç–æ–º—ã</a></li>
                <li class="nav-item"><a href="chain.html" class="nav-link">–ò–æ–Ω—ã</a></li>
                <li class="nav-item"><a href="potential.html" class="nav-link">–í—ã–±–æ—Ä –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞</a></li>
                <li class="nav-item"><a href="charts.html" class="nav-link">–ì—Ä–∞—Ñ–∏–∫–∏</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- üîπ –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
<div class="container my-5">

    <!-- üîπ –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ç–æ–º–æ–≤ -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h2 class="h5 mb-3 text-primary">–°–ø–∏—Å–æ–∫ –∞—Ç–æ–º–æ–≤</h2>
            <button id="loadAtoms" class="btn btn-primary mb-3">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –∞—Ç–æ–º—ã</button>
            <div id="atomTableContainer" class="table-responsive"></div>
        </div>
    </div>

    <!-- üîπ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞—Ç–æ–º–∞ -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h2 class="h5 text-success mb-3">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞—Ç–æ–º</h2>
            <form id="createAtomForm" class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">–°–∏–º–≤–æ–ª</label>
                    <input type="text" id="atomName" class="form-control" placeholder="He" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">–ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="fullName" class="form-control" placeholder="–ì–µ–ª–∏–π" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">–ú–∞—Å—Å–∞ (–∫–≥)</label>
                    <input type="number" id="mass" class="form-control" step="any" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">–ü–∞—Ä–∞–º–µ—Ç—Ä —Ä–µ—à–µ—Ç–∫–∏ a</label>
                    <input type="number" id="a" class="form-control" step="any" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –î–µ–±–∞—è</label>
                    <input type="number" id="debyeTemperature" class="form-control" step="any" required>
                </div>
                <div class="col-md-4">
                    <label class="form-label">–í–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="valence" class="form-control" required>
                </div>
                <div class="col-12 text-end">
                    <button type="submit" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- üîπ –ü–æ–∏—Å–∫ –∞—Ç–æ–º–∞ -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h2 class="h5 text-info mb-3">–ù–∞–π—Ç–∏ –∞—Ç–æ–º –ø–æ —Å–∏–º–≤–æ–ª—É</h2>
            <div class="input-group mb-3">
                <input type="text" id="searchSymbol" class="form-control" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: He">
                <button id="searchAtom" class="btn btn-info">–ü–æ–∏—Å–∫</button>
            </div>
            <div id="searchResult" class="table-responsive"></div>
        </div>
    </div>

</div>

<!-- üîπ Footer -->
<footer class="bg-primary text-white text-center py-3">
    ¬© 2025 –ü–ª–∞–∑–º–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
</footer>

<!-- üîπ –°–∫—Ä–∏–ø—Ç -->
<script>
    const API_BASE = "/atoms";

    document.addEventListener("DOMContentLoaded", () => {
        const atomTableContainer = document.getElementById("atomTableContainer");
        const loadAtomsBtn = document.getElementById("loadAtoms");
        const createForm = document.getElementById("createAtomForm");
        const searchBtn = document.getElementById("searchAtom");
        const searchResult = document.getElementById("searchResult");

        // —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã
        function renderTable(atoms) {
            if (!atoms || atoms.length === 0) return "<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>";

            let html = `
        <table class="table table-hover align-middle">
            <thead class="table-primary">
                <tr>
                    <th>ID</th>
                    <th>–°–∏–º–≤–æ–ª</th>
                    <th>–ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ú–∞—Å—Å–∞ (–∫–≥)</th>
                    <th>–ü–∞—Ä–∞–º. —Ä–µ—à–µ—Ç–∫–∏ a</th>
                    <th>–¢–µ–º–ø. –î–µ–±–∞—è</th>
                    <th>–í–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å</th>
                </tr>
            </thead>
            <tbody>
        `;

            atoms.forEach(atom => {
                html += `
                <tr>
                    <td>${atom.id}</td>
                    <td>${atom.atomName}</td>
                    <td>${atom.fullName}</td>
                    <td>${atom.mass}</td>
                    <td>${atom.a}</td>
                    <td>${atom.debyeTemperature}</td>
                    <td>${atom.valence}</td>
                </tr>`;
            });

            html += "</tbody></table>";
            return html;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∞—Ç–æ–º–æ–≤
        loadAtomsBtn.addEventListener("click", async () => {
            const response = await fetch(API_BASE);
            const data = await response.json();
            if (response.ok && data.data) {
                atomTableContainer.innerHTML = renderTable(data.data);
            } else {
                atomTableContainer.innerHTML = `<p class="text-danger">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—Ç–æ–º–æ–≤</p>`;
            }
        });

        // –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ç–æ–º–∞
        createForm.addEventListener("submit", async e => {
            e.preventDefault();
            const atom = {
                atomName: document.getElementById("atomName").value,
                fullName: document.getElementById("fullName").value,
                mass: parseFloat(document.getElementById("mass").value),
                a: parseFloat(document.getElementById("a").value),
                debyeTemperature: parseFloat(document.getElementById("debyeTemperature").value),
                valence: parseInt(document.getElementById("valence").value)
            };
            const response = await fetch(API_BASE, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(atom)
            });
            const data = await response.json();
            if (response.ok) {
                alert("‚úÖ " + data.message);
                createForm.reset();
            } else {
                alert("‚ùå –û—à–∏–±–∫–∞: " + (data.message || "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∞—Ç–æ–º"));
            }
        });

        // –ü–æ–∏—Å–∫ –∞—Ç–æ–º–∞
        searchBtn.addEventListener("click", async () => {
            const symbol = document.getElementById("searchSymbol").value.trim();
            if (!symbol) return;
            const response = await fetch(`${API_BASE}/symbol/${symbol}`);
            const data = await response.json();
            if (response.ok && data.data && data.data.length > 0) {
                searchResult.innerHTML = renderTable(data.data);
            } else {
                searchResult.innerHTML = "<p class='text-muted'>–ê—Ç–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω</p>";
            }
        });
    });
</script>
</body>
</html>
